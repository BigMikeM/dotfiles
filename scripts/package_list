#!/bin/bash
# Package definitions for different distributions and package managers
# Enhanced with better organization and additional packages
#
# Package Priority Strategy:
# 1. System packages (rpm, apt, pacman) - Highest priority
# 2. Cargo packages - For tools better maintained via Rust ecosystem
# 3. Python/Node packages - For development tools
# 4. Snap packages - Only for apps that work better as snaps (VS Code)
# 5. Flatpak packages - Only for apps exclusive to flatpak or officially supported

# Fedora/RHEL/CentOS packages (DNF/YUM)
rpm_packages=(
	# Core development tools
	zsh
	git
	cmake
	openssh
	gcc
	gcc-c++
	make

	# System utilities
	tree
	bat
	tldr
	gh
	trash-cli
	bc
	curl
	wget
	unzip
	zip

	# Development tools
	neovim
	ranger
	luarocks
	atool
	highlight
	shellcheck
	shfmt
	python3
	python3-pip
	python3-devel
	# Note: nodejs and npm are managed via nvm

	# Git tools
	gitui

	# Terminal emulators
	kitty
	alacritty

	# GUI Applications
	firefox
	gimp
	vlc

	# Libraries and dependencies
	pkg-config
	openssl-devel
	fontconfig-devel
	freetype-devel
	libX11-devel
	libXext-devel
	libXrandr-devel
	libXi-devel
	libXcursor-devel
	mesa-libGL-devel
	alsa-lib-devel
)

# RPM Fusion repositories (if available)
if command -v rpm >/dev/null 2>&1; then
	rpm_nonfree=(
		"https://mirrors.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm"
		"https://mirrors.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm"
	)
fi

# DNF package groups
rpm_groups=(
	"C Development Tools and Libraries"
	"Development Tools"
)

# WSL-specific packages (lighter set)
wsl_packages=(
	# Core essentials
	git
	cmake
	openssh-client
	gcc
	g++
	make
	build-essential

	# Utilities
	tree
	bat
	tldr
	gh
	trash-cli
	bc
	curl
	wget
	unzip
	zip
	jq

	# Development tools
	ranger
	luarocks
	lua-check
	atool
	highlight
	shellcheck
	shfmt

	# Python ecosystem
	python3
	python3-pip
	python-is-python3
	python3-venv
	python3-dev

	# Note: Node.js and npm are managed via nvm

	# Libraries
	pkg-config
	libssl-dev
	ca-certificates
	gnupg
)

# Ubuntu/Debian packages (APT)
apt_packages=(
	# Core development
	build-essential
	zsh
	git
	cmake
	openssh-client
	gcc
	g++
	make

	# System utilities
	tree
	bat
	tldr
	gh
	trash-cli
	bc
	curl
	wget
	unzip
	zip
	jq
	htop
	neofetch

	# Desktop utilities (if not WSL)
	brightnessctl
	playerctl
	pulseaudio-utils

	# Development tools
	ranger
	luarocks
	lua-check
	atool
	highlight
	shellcheck
	shfmt

	# Git tools
	gitui

	# Terminal emulators
	kitty

	# GUI Applications
	firefox
	firefox-esr
	gimp
	vlc

	# Python ecosystem
	python3
	python3-pip
	python-is-python3
	python3-venv
	python3-dev

	# Node.js
	nodejs
	npm

	# Libraries and dependencies
	pkg-config
	libssl-dev
	ca-certificates
	gnupg
	gcc-multilib
	g++-multilib
	libfreetype6-dev
	libasound2-dev
	libexpat1-dev
	libxcb-composite0-dev
	libbz2-dev
	libsndio-dev
	freeglut3-dev
	libxmu-dev
	libxi-dev
	libfontconfig1-dev
	libxcursor-dev
	libx11-dev
	libxext-dev
	libxrandr-dev
	mesa-common-dev
	libgl1-mesa-dev
)

# Arch Linux packages (Pacman)
arch_packages=(
	# AUR helper
	yay

	# Core development
	base-devel
	zsh
	git
	openssh
	gcc
	make
	cmake

	# System utilities
	tree
	bat
	tldr
	github-cli
	trash-cli
	bc
	curl
	wget
	unzip
	zip
	jq
	htop
	neofetch

	# Shell and terminal
	sheldon

	# Desktop utilities
	brightnessctl
	playerctl

	# Development tools
	neovim
	ranger
	luarocks
	luacheck
	lua-lanes
	atool
	ueberzug
	highlight
	shellcheck
	shfmt

	# Terminal emulators
	kitty
	wezterm
	alacritty

	# GUI Applications
	firefox
	gimp
	vlc

	# Python ecosystem
	python
	python-pip
	python-black
	python-pynvim
	python-pylint
	python-isort

	# Additional tools
	jrnl
	ruff

	# Git tools
	gitui

	# Libraries
	pkg-config
	openssl
	fontconfig
	freetype2
	libglvnd
	sndio
	gtk3
	sdl2
	libxkbcommon-x11

	# Gaming (optional)
	# arch-gaming-meta
)

# Rust packages (Cargo) - Only packages not available or better via cargo
cargo_packages=(
	# Python tooling (Rust-based, installed first for Python package management)
	uv # Fast Python package manager (replaces pip/venv)

	# Core utilities (newer/better than system packages)
	fd-find
	ripgrep
	bat    # Better cat with syntax highlighting
	lsd    # Better ls (LSDeluxe)
	du-dust # Better du
	sd     # Better sed
	procs  # Better ps

	# Shell management
	sheldon  # Zsh plugin manager
	starship # Cross-shell prompt
	zoxide   # Smarter cd

	# File utilities
	broot # File tree browser

	# Development tools
	cargo-update  # Update cargo packages
	cargo-watch   # Watch for file changes
	cargo-edit    # Add/remove cargo dependencies
	cargo-expand  # Expand macros
	cargo-outdated # Check for outdated dependencies

	# Utilities
	tealdeer  # tldr client (tldr)
	tokei     # Count lines of code
	hyperfine # Benchmarking tool
	bandwhich # Network utilization by process
	bottom    # System monitor (btm)
	shellharden # Shell script linter
)

# Python packages (via uv tool install or pip fallback)
# Note: uv is installed via cargo above
uv_packages=(
	# Development tools (Rust-based linter replaces black/isort/flake8/pylint)
	ruff  # Fast Python linter and formatter
	pytest # Testing framework
	pylint # Code analysis tool

	# Jupyter ecosystem
	jupyter    # Jupyter notebook
	jupyterlab # JupyterLab interface
	ipython    # Enhanced Python shell

	# Data science basics
	pandas     # Data analysis
	numpy      # Numerical computing
	matplotlib # Plotting

	# Other utilities
	requests   # HTTP requests
	pyyaml	 # YAML parsing
	jsonschema # JSON schema validation
	rich	   # Rich text and formatting in terminal
	typer	   # CLI application framework
)

# Node.js packages (npm) - Installed via nvm-managed Node.js
npm_packages=(
	# Package management
	npm-check-updates
	pnpm
	yarn

	# Development tools
	typescript
	ts-node
	eslint
	prettier

	# Build tools
	webpack
	webpack-cli
	vite

	# Utilities
	http-server
	json-server
	live-server

	# Documentation
	markdown-cli

	# Testing
	jest
	mocha

	# Linting and formatting
	standard
	jshint

	# Development servers
	nodemon
	concurrently

	# Package auditing
	npm-audit-resolver

	# Global CLI tools
	create-react-app
	create-next-app
	create-vue

	# Additional useful tools
	forever
	pm2
	serve
)

# Additional package arrays for other package managers
# Snap packages - only for packages that work better as snaps
snap_packages=(
	code # VS Code - better as snap for auto-updates and extensions
)

# Flatpak packages - only for packages that work better as flatpaks or are only available as flatpaks
flatpak_packages=(
	com.github.tchx84.Flatseal # Flatpak permission manager
	com.discordapp.Discord     # Discord - official flatpak support
	com.spotify.Client         # Spotify - only available as flatpak
)

# Export all package arrays
export rpm_packages rpm_groups rpm_nonfree arch_packages cargo_packages
export uv_packages apt_packages npm_packages wsl_packages snap_packages flatpak_packages
